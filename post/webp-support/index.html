<!doctype html>
<html data-n-head-ssr data-n-head="">
  <head>
    <title data-n-head="true">[译] WebP 支持：超乎你想象 | 文蔺的博客</title><meta data-n-head="true" charset="utf-8"><meta data-n-head="true" name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta data-n-head="true" name="description" content="文蔺的前端学习记录，国外技术文章翻译，个人学习心得等等这些都会记录在这里。"><meta data-n-head="true" name="keywords" content="翻译,Webp,前端优化"><meta data-n-head="true" name="description" content="WebP 支持：超乎你想象"><link data-n-head="true" rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/static/0501d49c081ea86e209e.css">
  </head>
  <body data-n-head="">
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="wrapper"><nav id="sidebar" class="behavior_1"><div class="wrap"><div class="profile"><a href="/" class="nuxt-link-active"><img src="/imgs/avatar.jpg" alt="文蔺的博客"></a> <span>文蔺的博客</span></div> <ul class="buttons"><li><a href="/" title="主页" class="nuxt-link-active"><i class="iconfont icon-home"></i> <span> 主页</span></a></li><li><a href="/archives" title="归档"><i class="iconfont icon-archive"></i> <span> 归档</span></a></li><li><a href="/slides" title="Slides"><i class="iconfont icon-archive"></i> <span> Slides</span></a></li><li><a href="/about" title="关于"><i class="iconfont icon-user"></i> <span> 关于</span></a></li><li><a href="/link" title="关注"><i class="iconfont icon-link"></i> <span> 关注</span></a></li><li><a href="/collection" title="收藏"><i class="iconfont icon-archive"></i> <span> 收藏</span></a></li></ul></div> <ul class="buttons"><li><a href="https://github.com/AngusFu/" rel="nofollow" target="_blank" class="inline"><i title="GitHub" class="iconfont icon-github-v"></i></a> <!----> <!----> <a href="/atom.xml" target="_blank" class="inline"><i title="RSS" class="iconfont icon-rss-v"></i></a> <a href="/search" class="inline"><i title="Search" class="iconfont icon-search"></i></a></li></ul></nav> <div id="header"><div class="btn-bar"><i></i></div> <h1><a href="/" class="nuxt-link-active">文蔺的博客</a></h1> <a href="/about/" class="me"><img src="/imgs/avatar.jpg" alt="文蔺的博客"></a></div> <div id="sidebar-mask" style="display:none"></div> <div id="main" class="main"><div id="page-post"><article class="post detail"><div class="meta"><div class="date">2016-07-18</div></div> <h1 class="title">[译] WebP 支持：超乎你想象</h1> <div class="entry-content"><blockquote><p style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">
          原文作者:
          <a target="_blank" href="https://optimus.keycdn.com/">optimus.keycdn.com</a> <br>原文地址:
          <a target="_blank" href="https://optimus.keycdn.com/support/webp-support/">https://optimus.keycdn.com/support/webp-support/</a> <br>译文地址:
          <a target="_blank" href="http://www.wemlion.com/post/webp-support">http://www.wemlion.com/post/webp-support</a> <br>本文由
          <a target="_blank" href="http://www.wemlion.com">文蔺</a> 翻译，转载请保留此声明。
          <br>著作权属于原作者，本译文仅用于学习、研究和交流目的，请勿用于商业目的。
        </p></blockquote> <p>WebP 是 Google 发明的更小的替代 JPEG 和 PNG 的格式。最近有很多关于<strong>WebP支持</strong>的疑惑，细说来就是可以用它做什么，不能做什么，比如说浏览器支持，CMS 支持等等。今天我想清除你所有可能的疑虑。WebP 的支持程度实际上比你想的可能要好得多。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/webp-support.png" target="_blank"><img alt="webp support"></a></p> <h2 id="webp-">WebP 浏览器支持</h2> <p>并非所有浏览器都支持 WebP，所以很重要的是你得清楚哪些浏览器是支持的，这可能会影响你做决定，是否在你的网站或项目中转换并<a href="https://optimus.keycdn.com/support/configuration-to-deliver-webp/" target="_blank">采用 WebP 图片</a>。下面是所有主流浏览器及其 <a href="http://caniuse.com/#feat=webp" target="_blank">WebP支持程度</a>。</p> <blockquote><p>截至 2016 年 7 月，全球浏览器对 WebP 支持率是 <strong>69.6%</strong> – caniuse.com</p></blockquote> <h3 id="chrome-webp">Chrome WebP</h3> <p>Google Chrome 官方<strong>自 Chrome 23 起开始支持 WebP</strong>）（最初发布于 2012 年 11 月），自 Chrome 9 起部分支持。部分支持指的是并不支持无损的、支持 alpha 通道的 WebP。</p> <p>Google 的安卓浏览器（Google’s Android browser）从 4.2 版本起开始官方支持 WebP（最初发布于 2012 年 11 月），4 版本起开始部分支持。Google Chrome 安卓版（ Google’s Chrome for Android browser）从 Chrome 50 起开始支持 Webp。</p> <h3 id="opera-webp">Opera WebP</h3> <p>Opera 官方<strong>自 Opera 12.1 开始支持 WebP</strong>（最初发布于 2012 年 11 月），自 Opera 11.5 起部分支持。部分支持指的是并不支持无损的、支持 alpha 通道的 WebP。</p> <p>Opera mini 浏览器当前所有版本都官方支持 WebP。</p> <h3 id="firefox-webp">FireFox WebP</h3> <p>Firefox <strong>当前不支持 WebP</strong>。Mozilla 论坛的 <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=856375" target="_blank">bug 856375</a> 正在讨论此事。</p> <h3 id="internet-explorer-webp">Internet Explorer WebP</h3> <p>Internet Explorer 和他们新的 Edge 浏览器，都<strong>不支持WebP</strong>。而且目前并无添加支持的<a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/status/webpimageformatsupport?filter=f3f0000bf&search=webp" target="_blank">任何打算</a>。不过，已有<a href="https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/6508417-webp-image-format-support" target="_blank">用户发声讨论</a>，人们要求微软将 Webp 支持加入 Edge。</p> <h3 id="safari-webp">Safari WebP</h3> <p>Apple 的 Safari 浏览器及其 iOS Safari 浏览器都<strong>不支持WebP</strong>。不过，最近 HTML5test 有条推文说我们有望在 iOS 10 看到<a href="https://twitter.com/html5test/status/752434454061322240" target="_blank">Safari支持 WebP</a>。iOS 10 目前处于 beta 测试阶段，所以时间会说明一切。</p> <h2 id="-webp-">你该使用 WebP 吗?</h2> <p>因为全球 WebP 支持度在 70% 左右浮动，使用这种图片格式来替代 PNG 和 JPEG 是极有意义的。还有重要的一点要提到，无论如何实现 WebP，<strong>你只是为支持的浏览器提供 WebP 服务</strong>，而为其他浏览器提供 PNG 和 JPEG。使用 WebP 并不会破坏你的图片。把这当做增值，而非改变。还有另外一些东西需要考虑，如浏览器市场份额，当前流量，WebP 相对于 PNG 和 JPEG 的文件体积。</p> <h3 id="1-">1. 浏览器市场份额</h3> <p>决定是否使用 WebP 的时候，记得看下浏览器市场份额，因为 Chrome 和 Opera 支持 WebP，所以有必要看下他们的占比。我们从一些不同来源收集了一些统计数据，它们都有自己不同的数据收集方式：</p> <p><strong>StatCounter 浏览器市场份额</strong></p> <p><a href="http://gs.statcounter.com/#browser-ww-monthly-201506-201606" target="_blank">StatCounter</a> 截至 2016 年 6 月的数据显示，Chrome 占有市场份额为 58% 的，Firefox 以大约 16% 排名第二。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-market-share-statcounter.png" target="_blank"><img alt="浏览器市场份额 statcounter"></a></p> <p><strong>W3Counter 浏览器市场份额</strong></p> <p><a href="https://www.w3counter.com/globalstats.php" target="_blank">W3Counter</a> 截至 2016 年 6 月的数据显示，Chrome 占有约 57% 的市场比例，Safari 以约 14% 跻身第二。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-market-share-w3counter.png" target="_blank"><img alt="浏览器市场份额 w3counter"></a></p> <p><strong>W3Schools 浏览器市场份额</strong></p> <p><a href="http://www.w3schools.com/browsers/browsers_stats.asp" target="_blank">W3Schools</a> 截至 2016 年 5 月的数据显示，Chrome 占有约 71% 的市场份额，Firefox 以约 17% 居于其后。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-market-share-w3schools.png" target="_blank"><img alt="浏览器市场份额 w3schools"></a></p> <p><strong>Clicky 浏览器市场份额</strong></p> <p><a href="https://clicky.com/marketshare/global/web-browsers/" target="_blank">Clicky</a> 截至 2016 年 7 月的数据显示，Chrome 占有约 50% 的市场份额，Firefox 以约 18% 位居第二。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/clicky-browser-market-share.png" target="_blank"><img alt="clicky browser market share"></a></p> <p>从上面的数据可以看到，<strong>Chrome 平均占有约 59% 的市场份额</strong>，所以必须意识到，如果在项目中加入 Webp 图片，大多数访客都会看到 WebP 版本。Opera 仅拥有市场份额的一小部分，但它们的用户也可以看到。</p> <h3 id="2-google-analytics">2. Google Analytics</h3> <p>尽管浏览器市场份额对大多数人来说可能倾向于 Chrome，并不意味着你的网站/项目也是如此。确认数据总是很重要的。做起来很容易，点击 Google Analytics 的 “浏览器与操作系统”（“Browser & OS”）部分就能看到。在下面的例子中，可以看到将近 70% 的流量来自 Chrome。在这种情况下，WebP 是很有利的，这意味着 70% 的访客会看到更小体积的文件。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-google-analytics.png" target="_blank"><img alt="browser google analytics"></a></p> <p>还有，别忘了移动端！可以在 Google Analytics 的“设备”（“Devices”）部分看到。如你所见，大部分流量来自苹果设备。所以如果 iOS 10 完全支持 WebP 的话会颇有意思，这样一来会大量的移动端流量将会有戏剧性的不同。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/google-analytics-mobile.png" target="_blank"><img alt="google analytics mobile"></a></p> <h3 id="3-webp-">3. WebP 文件体积</h3> <p>已经有大量研究比较了 WebP 与 PNG、JPEG 的文件体积。一定要去看看它们。</p> <ul><li><p><a href="https://optimus.keycdn.com/support/jpg-to-webp/" target="_blank">JPG 转 WebP – 压缩大小比较</a></p> <ul><li><strong>WebP 平均减小了 85.87% 的文件提交</strong>。加载时间降低了 11%，页面整体大小减少了 29%。</li></ul></li> <li><p><a href="https://optimus.keycdn.com/support/png-to-webp/" target="_blank">PNG 转 WebP – 压缩大小比较</a></p> <ul><li><strong>WebP 平均减小了42.8% 的文件提交</strong>。加载时间降低了 3%，页面整体大小减少了 25%。</li></ul></li> <li><p><a href="https://www.keycdn.com/blog/wordpress-cache-enabler/" target="_blank">WordPress 缓存开启下的 WebP
案例研究</a></p></li></ul> <p>还需要考虑<em>成本效益比</em>（cost-benefit ratio）。对 WordPress 这样的 CMS 来说，现在有两种图片，一个是 JPEG 或 PNG，还有一个 WebP。因此使用 WebP 会占用服务器更多的硬盘空间。但事实是，更小体积的图片带来的是更快的加载时间。不应忽略节省下来的流量：取决于不同项目，积累下来的数量相当可观。</p> <p>其他人正在使用 WebP，虽然你可能没注意到。Dollar Shave Club 可以将其 App 的大小由 230 MB 减少到 30 MB！结果就是，<a href="http://engineering.dollarshaveclub.com/shaving-our-image-size/" target="_blank">使用 WebP 格式将体积减少了七倍</a>。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/webp-image-savings.png" target="_blank"><img alt="webp image savings"></a></p> <h2 id="cms-webp-">CMS WebP 支持</h2> <p>接着平台支持的问题就来了，不管你是使用 WordPress 或 Joomla 这样 的 CMS，或者仅仅是像 Laravel 这样的 PHP 框架搭建的简单的静态站点。下面我们将会介绍一点关于如何在在不同平台上支持 Webp 图片的内容。</p> <h3 id="wordpress-webp">WordPress WebP</h3> <p>事实上，WordPress 很容易实现 WebP 支持。你可以使用我们的<a href="https://wordpress.org/plugins/optimus/" target="_blank">集成图片优化(Image Optimizer)</a> 插件，在将图片上传至 WordPress 媒体库时候自动转换为 WebP 格式。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/optimus-webp-files.png" target="_blank"><img alt="optimus webp files"></a></p> <p>然后你可以使用免费的 <a href="https://wordpress.org/plugins/cache-enabler/" target="_blank">WordPress Cache Enabler</a> 插件来为访客提供 WebP 图片。</p> <p><a href="https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/webp-support-caching.png" target="_blank"><img alt="webp support caching"></a></p> <p>重点是，Cache Enabler 做的其实是判断浏览器支持，为支持的浏览器提供 WebP，而为其他浏览器提供 JPEG 或 PNG。它实际上已经自动为你做好了切换工作。</p> <h3 id="joomla-webp">Joomla WebP</h3> <p>Yireo 的免费的 <a href="https://www.yireo.com/software/joomla-extensions/webp" target="_blank">WebP Joomla 扩展</a>，允许在浏览器支持的情况下启用 WebP 支持。其侦测浏览器对 WebP 的支持，基于 user-agent 简单检测（这样就能正确匹配 Chrome）以及额外的 JavaScript 检测。如若检测到支持 WebP，扩展会解析输出的 HTML，确保那些支持图片（png，jpg，jpeg）的链接被 Webp 图片替换掉。</p> <h3 id="magento-webp">Magento WebP</h3> <p>Yireo 的免费的 <a href="https://www.yireo.com/software/magento-extensions/webp" target="_blank">WebP Magento 扩展</a>，允许在浏览器支持的情况下启用 WebP 支持。其侦测浏览器对 WebP 的支持，基于 user-agent 简单检测（Chrome）以及额外的 JavaScript 检测（这样也能够匹配其他浏览器）。如若检测到支持 WebP，扩展会解析 HTML 输出，确保那些支持图片（png，jpg，jpeg）的链接被 Webp 图片替换掉。</p> <h3 id="-webp">其他平台上的 WebP</h3> <p>对于其他平台，你应该去看看我们的这篇<a href="https://optimus.keycdn.com/support/configuration-to-deliver-webp/" target="_blank">如何提供 WebP (how to deliver WebP)</a>。某些平台启用 WebP 支持，可能需要修改你的 <code>.htaccess</code> 文件或者 Nginx 配置。</p> <h2 id="-">小结</h2> <p>如你所见，WebP 的支持程度可能比你最初想的要好得多。当然应该讲浏览器市场份额以及当前的浏览数据纳入考虑中。比方说，如果 70% 以上的流量都来自 Chrome，那使用 WebP 来加速网站意义重大。如果你在使用 CMS，一切都很简单，因为有很多插件来帮你完成 WebP 的转换。</p> <h2 id="-">相关文章</h2> <ul><li><p><a href="https://optimus.keycdn.com/support/wordpress-retina/" target="_blank">How to Use WordPress Retina and WebP Images</a></p></li> <li><p><a href="https://www.keycdn.com/blog/convert-to-webp-the-successor-of-jpeg/" target="_blank">Convert to WebP Format – The Successor of JPEG</a></p></li></ul></div></article> <nav class="pagination"><a href="/post/how-do-mobile-emulators-even" title="[译] 移动开发中的仿真器与模拟器" class="prev">« [译] 移动开发中的仿真器与模拟器</a> <a href="/post/http-2-server-push-with-multiple-assets-per-link-header" title="[译] HTTP2 Server Push 实践：单 Link  报头包含多资源场景" class="next">[译] HTTP2 Server Push 实践：单 Link  报头包含多资源场景 »</a></nav></div> <footer id="footer" class="inner">
      © 2022 -  文蔺的博客
      
        <span> - </span> <a href="/" class="nuxt-link-active">www.wemlion.com</a> <br>
      Powered by <a target="_blank" href="https://nuxtjs.org">Nuxt.js</a> & <a target="_blank" rel="nofollow" href="https://firekylin.org" class="external">FireKylin</a></footer></div></div></div></div><script>window.__NUXT__={layout:"default",data:[{}],error:null,serverRendered:!0}</script><script src="/static/c418fb652629ac1ad5ca.js" defer></script><script src="/static/5682a3484104ee9b00f2.js" defer></script><script src="/static/a04af2434d342797c405.js" defer></script><script src="/static/a9e13b4b84fcd888d410.js" defer></script><script src="/static/0329710550037b626a84.js" defer></script>
  </body>
</html>
