(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{194:function(t,n,l){"use strict";l.r(n);var _={computed:{data:function(){return{title:"关于前端常见算法面试题的一些思考",description:"关于前端常见算法面试题的一些思考",keywords:"算法,JavaScript,原创",pathname:"front-end-interview-algo-questions",translation:null,create_time:"2016-10-26",prev:{title:"关于 setImmediate",pathname:"js-set-immediate"},next:{title:"JavaScript Weekly 306 阅读笔记",pathname:"javascript-weekly-306-notes"}}}}},v=l(3),component=Object(v.a)(_,function(){var t=this,n=t.$createElement,l=t._self._c||n;return l("post",{attrs:{data:t.data}},[l("p",[t._v("今天上班时间，读了 "),l("a",{attrs:{href:"http://www.jackpu.com/",target:"_blank"}},[t._v("@JackPu")]),t._v(" 的新文章"),l("a",{attrs:{href:"http://www.jackpu.com/qian-duan-mian-shi-zhong-de-chang-jian-de-suan-fa-wen-ti/",target:"_blank"}},[t._v("《前端面试中的常见的算法问题》")]),t._v("。内容虽然看起挺基础，但可以有不少思考，同时也是一次挺好的复习。")]),t._v(" "),l("p",[t._v("其中，有几个问题，想出了一些不同的解决办法，做了下笔记，并且进行了简单的性能测试。关于排序，这次没有深看。接下来有空时，再研究一番。")]),t._v(" "),l("h2",{attrs:{id:"-palindromic-words-"}},[t._v("判断回文(Palindromic Words)")]),t._v(" "),l("p",[t._v("结果是，使用循环来判断，性能远高于数组方法。接下来，在其他一些例子中也能看到，借用数组方法，往往很耗性能。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// Array methods")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" isPalindromicA = "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-params"},[t._v("w")]),t._v(" =>")]),t._v(" w === w.split("),l("span",{staticClass:"hljs-string"},[t._v("''")]),t._v(").reverse().join("),l("span",{staticClass:"hljs-string"},[t._v("''")]),t._v(");\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// while loop")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" isPalindromicB = "),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("w")]),t._v(") =>")]),t._v(" {\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" len = w.length;\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 感谢 @拉比克魔王 的指点")]),t._v("\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" start = "),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(".ceil(len / "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(");\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (start < len) {\n      "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (w[start] !== w[len - start - "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("]) {\n            "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(";\n       }\n       start++;\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" "),l("span",{staticClass:"hljs-literal"},[t._v("true")]),t._v(";\n};\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// -------------------------------------------------")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// perf test")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// first let's generate a fake word with, say 20 chars")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" word = ("),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" ("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" len = "),l("span",{staticClass:"hljs-number"},[t._v("20")]),t._v(";\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" arr = [];\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (len--) {\n        arr.push("),l("span",{staticClass:"hljs-number"},[t._v("97")]),t._v(" + (("),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(".random()* "),l("span",{staticClass:"hljs-number"},[t._v("26")]),t._v(") | "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("));\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" "),l("span",{staticClass:"hljs-built_in"},[t._v("String")]),t._v(".fromCharCode.apply("),l("span",{staticClass:"hljs-built_in"},[t._v("String")]),t._v(", arr);\n})();\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// times")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" t = "),l("span",{staticClass:"hljs-number"},[t._v("2e4")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" i = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'Array method'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    isPalindromicA(word);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'Array method'")]),t._v(");\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'Loop'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    isPalindromicB(word);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'Loop'")]),t._v(");")])]),l("h2",{attrs:{id:"-"}},[t._v("数组去重")]),t._v(" "),l("p",[t._v("ES 5 方法性能更好，高一倍以上。不过笔试、面试时，附上 "),l("code",[t._v("Set")]),t._v(" 的办法，肯定会更好。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// ES 5")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" uniqueES5 = "),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("arr")]),t._v(") =>")]),t._v(" {\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" cache = {};\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" arr.filter("),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("item")]),t._v(") =>")]),t._v(" {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" cache[item] ? "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(" : (cache[item] = "),l("span",{staticClass:"hljs-literal"},[t._v("true")]),t._v(");\n    });\n};\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// ES6 method")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 为啥用了 Array.from 呢，保持类型一致啊")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" uniqueES6 = "),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("arr")]),t._v(") =>")]),t._v(" "),l("span",{staticClass:"hljs-built_in"},[t._v("Array")]),t._v(".from("),l("span",{staticClass:"hljs-keyword"},[t._v("new")]),t._v(" "),l("span",{staticClass:"hljs-built_in"},[t._v("Set")]),t._v("(arr));\n\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// -------------------------------------------------")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// perf test")]),t._v("\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// times")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" t = "),l("span",{staticClass:"hljs-number"},[t._v("2e4")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" i;\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" array = ["),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("3")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("3")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("4")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("5")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("4")]),t._v("];\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'ES5 filter + cache'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    uniqueES5(array);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'ES5 filter + cache'")]),t._v(");\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'ES6 Set'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    uniqueES6(array);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'ES6 Set'")]),t._v(");")])]),l("h2",{attrs:{id:"-"}},[t._v("统计一个字符串出现最多的字母")]),t._v(" "),l("p",[t._v("正则表达式的办法，临时想起来的，运行起来还是要慢，至少慢了一半。所以有时候还是要老老实实写代码，奇淫巧技少用。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 黑科技")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" findMaxDuplicateCharRegex = "),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("chars")]),t._v(") =>")]),t._v(" {\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 先对字符进行排序")]),t._v("\n    chars = chars.split("),l("span",{staticClass:"hljs-string"},[t._v("''")]),t._v(").sort().join("),l("span",{staticClass:"hljs-string"},[t._v("''")]),t._v(");\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 获取相同字符序列")]),t._v("\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" regex = "),l("span",{staticClass:"hljs-regexp"},[t._v("/(.)(\\1)+/g")]),t._v(";\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" temp = "),l("span",{staticClass:"hljs-literal"},[t._v("null")]),t._v(";\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" max = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" char = "),l("span",{staticClass:"hljs-string"},[t._v("''")]),t._v(";\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (temp = regex.exec(chars)) {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (temp["),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("].length > max) {\n            char = temp["),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("];\n            max = temp["),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("].length;\n        }\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" char;\n};\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// see http://www.jackpu.com/qian-duan-mian-shi-zhong-de-chang-jian-de-suan-fa-wen-ti/")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" findMaxDuplicateCharNormal = "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("str")]),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (str.length == "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(") {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" str;\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" charObj = {};\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("for")]),t._v(" ("),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" i = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("; i < str.length; i++) {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (!charObj[str.charAt(i)]) {\n            charObj[str.charAt(i)] = "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(";\n        } "),l("span",{staticClass:"hljs-keyword"},[t._v("else")]),t._v(" {\n            charObj[str.charAt(i)] += "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(";\n        }\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" maxChar = "),l("span",{staticClass:"hljs-string"},[t._v("''")]),t._v(",\n        maxValue = "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(";\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("for")]),t._v(" ("),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" k "),l("span",{staticClass:"hljs-keyword"},[t._v("in")]),t._v(" charObj) {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (charObj[k] >= maxValue) {\n            maxChar = k;\n            maxValue = charObj[k];\n        }\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" maxChar;\n};\n\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// -------------------------------------------------")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// perf test")]),t._v("\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// first let's generate a random string with 30 chars")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" chars = ("),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" ("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" len = "),l("span",{staticClass:"hljs-number"},[t._v("30")]),t._v(";\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" arr = [];\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (len--) {\n        arr.push("),l("span",{staticClass:"hljs-number"},[t._v("97")]),t._v(" + (("),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(".random()* "),l("span",{staticClass:"hljs-number"},[t._v("26")]),t._v(") | "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("));\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" "),l("span",{staticClass:"hljs-built_in"},[t._v("String")]),t._v(".fromCharCode.apply("),l("span",{staticClass:"hljs-built_in"},[t._v("String")]),t._v(", arr);\n})();\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// times")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" t = "),l("span",{staticClass:"hljs-number"},[t._v("2e4")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" i;\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'正常方法'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    findMaxDuplicateCharNormal(chars);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'正常方法'")]),t._v(");\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'正则方法'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    findMaxDuplicateCharRegex(chars);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'正则方法'")]),t._v(");")])]),l("h2",{attrs:{id:"-"}},[t._v("不借助临时变量，进行两个整数的交换")]),t._v(" "),l("p",[t._v("三种方式均可。没有做性能测试。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" a = "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" b = "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(";\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// ES 6")]),t._v("\n[a, b] = [b, a];\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 加减法")]),t._v("\na = a - b;\nb = b + a;\na = b - a;\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 异或")]),t._v("\na = a ^ b;\nb = a ^ b;\na = b ^ a;")])]),l("h2",{attrs:{id:"-"}},[t._v("斐波那契数列")]),t._v(" "),l("p",[t._v("联想到了三种方式：动态规划；"),l("a",{attrs:{href:"http://es6.ruanyifeng.com/#docs/function#尾递归",target:"_blank"}},[t._v("尾递归")]),t._v("；generator（算不上一个解决方案，只是临时想到的）。")]),t._v(" "),l("p",[t._v("上述三种方式中，动态规划最快，计算 fib(1000) 20000 次耗时 170 ms；尾递归耗时 200 ms 左右，generator 耗时 2800 ms 左右。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 动态规划")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" fibonacciDynamic = "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" ("),l("span",{staticClass:"hljs-params"},[t._v("n")]),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" array = ["),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(", "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("];\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("for")]),t._v("("),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" i = "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v("; i < n + "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("; i++){\n        array[i] = array[i - "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("] + array[i - "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v("];\n    }\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" array[n];\n};\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 尾递归")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" fibonacciTailCall = "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" ("),l("span",{staticClass:"hljs-params"},[t._v("n , ac1 = "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(" , ac2 = "),l("span",{staticClass:"hljs-number"},[t._v("1")])]),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v("( n <= "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(" ) {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" ac2\n    }\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" fibonacciTailCall(n - "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(", ac2, ac1 + ac2);\n};\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// generator")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" fibonacciGenerator = ("),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" ("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" *"),l("span",{staticClass:"hljs-title"},[t._v("fib")]),t._v("("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" a = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(", b = "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(", sum = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" ("),l("span",{staticClass:"hljs-literal"},[t._v("true")]),t._v(") {\n            sum = a + b;\n            b = a;\n            a = sum;\n            "),l("span",{staticClass:"hljs-keyword"},[t._v("yield")]),t._v(" sum;\n        }\n    }\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" ("),l("span",{staticClass:"hljs-params"},[t._v("n")]),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" iterator = fib();\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" result = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (n--) {\n            result = iterator.next();\n        }\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" result.value;\n    };\n}());\n\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// -------------------------------------------------")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// perf test")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// calculate fib(1000) 20000 times")]),t._v("\n\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" t = "),l("span",{staticClass:"hljs-number"},[t._v("2e4")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" n = "),l("span",{staticClass:"hljs-number"},[t._v("1000")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" i;\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'动态规划'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    fibonacciDynamic(n);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'动态规划'")]),t._v(");\n\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'尾递归'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    fibonacciTailCall(n);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'尾递归'")]),t._v(");\n\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'generator'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    fibonacciGenerator(n);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'generator'")]),t._v(");")])]),l("h2",{attrs:{id:"-"}},[t._v("正数组的最大差值")]),t._v(" "),l("p",[t._v("出乎意料地，这次 Math 方法竟然败给看 for 循环。不用说，reduce 超级慢，比 Math 还慢近十倍。")]),t._v(" "),l("p",[t._v("声明：Math 只是在本案例中比 for 循环慢，实际上如果只是单独取数组中的最大值或最小值，Math 还是很厉害的。实测：随机生成一个长度为 20 的数组（100 以内的正整数），寻找最大值，运行 10^6 次，Math 完胜，不到 1s 搞定，for 循环直接卡死。所以还是得看具体情况。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 使用 Math ")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" getMaxGap = "),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("array")]),t._v(") =>")]),t._v(" "),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(".max.apply("),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(", array) - "),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(".min.apply("),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(", array);\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 使用 reduce")]),t._v("\n"),l("span",{staticClass:"hljs-keyword"},[t._v("const")]),t._v(" getMaxDiff = "),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("array")]),t._v(") =>")]),t._v(" {\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (array.length < "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(") "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" arrary["),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("];\n\n    array = array.reduce("),l("span",{staticClass:"hljs-function"},[t._v("("),l("span",{staticClass:"hljs-params"},[t._v("[max, min], el")]),t._v(") =>")]),t._v(" {\n       max = el > max ? el : max;\n       min = el < min ? el : min;\n       "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" [max, min];\n    }, array);\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" array["),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("] - array["),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("];\n};\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// see http://www.jackpu.com/qian-duan-mian-shi-zhong-de-chang-jian-de-suan-fa-wen-ti/")]),t._v("\n"),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" "),l("span",{staticClass:"hljs-title"},[t._v("getMaxProfit")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("arr")]),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" minPrice = arr["),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("];\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" maxProfit = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("for")]),t._v(" ("),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" i = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v("; i < arr.length; i++) {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" currentPrice = arr[i];\n\n        minPrice = "),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(".min(minPrice, currentPrice);\n\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" potentialProfit = currentPrice - minPrice;\n\n        maxProfit = "),l("span",{staticClass:"hljs-built_in"},[t._v("Math")]),t._v(".max(maxProfit, potentialProfit);\n    }\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" maxProfit;\n}\n\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("// -------------------------------------------------")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// perf test")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("// 2000000 times: Math ~= 100ms; Reduce ~= 1100ms; Normal ~= 25ms")]),t._v("\n\n"),l("span",{staticClass:"hljs-keyword"},[t._v("let")]),t._v(" array = ["),l("span",{staticClass:"hljs-number"},[t._v("10")]),t._v(","),l("span",{staticClass:"hljs-number"},[t._v("5")]),t._v(","),l("span",{staticClass:"hljs-number"},[t._v("11")]),t._v(","),l("span",{staticClass:"hljs-number"},[t._v("7")]),t._v(","),l("span",{staticClass:"hljs-number"},[t._v("8")]),t._v(","),l("span",{staticClass:"hljs-number"},[t._v("9")]),t._v("];\n\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" t = "),l("span",{staticClass:"hljs-number"},[t._v("2e6")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" n = "),l("span",{staticClass:"hljs-number"},[t._v("1000")]),t._v(";\n"),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" i;\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'Math'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    getMaxGap(array);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'Math'")]),t._v(");\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'Reduce'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    getMaxDiff(array);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'Reduce'")]),t._v(");\n\n\ni = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(";\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".time("),l("span",{staticClass:"hljs-string"},[t._v("'Normal'")]),t._v(");\n"),l("span",{staticClass:"hljs-keyword"},[t._v("while")]),t._v(" (i < t) {\n    getMaxProfit(array);\n    i++;\n}\n"),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".timeEnd("),l("span",{staticClass:"hljs-string"},[t._v("'Normal'")]),t._v(");")])]),l("p",[t._v("对算法的了解还十分浅薄，错误肯定有，希望读者指教。还需要钻研更多。感谢 "),l("a",{attrs:{href:"http://www.jackpu.com/",target:"_blank"}},[t._v("@JackPu")]),t._v(" 的文章带来的启发和思考。")]),t._v(" "),l("div",{staticClass:"tip"},[t._v("\n补注："),l("br"),t._v("\n本文在描述测试结果会进行一些对比，也会使用一些“失败”“不如”等字眼，但测试比较主要是满足好奇心。实际工作中，多数人应该不会碰到那么大的计算量，因此几乎不用担心（多数情况下），多关注其他方面的优化吧。"),l("br"),t._v("\n另外，请不要对某些说法（正数组的差值例子中所说 Math 败给 for 循环）产生刻板印象（我自己就是，这次之后总感觉 Math 是不是不给力。被自己误会到了囧），具体情况具体分析，另外，多操作，多做实验。"),l("br"),t._v("\n如果本文一些不严谨的说法给您的学习、工作造成负面影响，还请谅解。如有问题，欢迎随时和我联系。\n")])])},[],!1,null,null,null);n.default=component.exports}}]);