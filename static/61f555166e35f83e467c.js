(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{212:function(t,e,r){"use strict";r.r(e);var v={computed:{data:function(){return{title:"使用 jQuery.ajax 上传带文件的表单",description:"使用 jQuery.ajax 上传带文件的表单",keywords:"JavaScript,原创,jQuery",pathname:"jquery-ajax-formdata",translation:null,create_time:"2016-10-29",prev:{title:"算法学习：插入排序",pathname:"algo-insertion-sort"},next:{title:"JavaScript Weekly 307 阅读笔记",pathname:"javascript-weekly-307"}}}}},c=r(3),component=Object(c.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("post",{attrs:{data:t.data}},[r("p",[t._v("今天帮人看代码的时候，遇到一点小问题。使用 jQuery 上传带文件的表单时，会有些问题。")]),t._v(" "),r("p",[t._v("首先，因为使用的是 FormData，所以必须在传入 "),r("code",[t._v("$.ajax")]),t._v(" 的参数中配置 "),r("code",[t._v("processData: false")]),t._v("。")]),t._v(" "),r("p",[t._v("否则将会抛出 "),r("code",[t._v("Illegal invocation")]),t._v(" 的异常，因为 jQuery 默认是会对传入的 data 字段的数据进行处理的。")]),t._v(" "),r("p",[r("a",{attrs:{href:"http://api.jquery.com/jQuery.ajax/",target:"_blank"}},[t._v("官方文档")]),t._v("是这么解释的：")]),t._v(" "),r("p",[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t01d7c364142dff02d8.png",expression:"`https://p.ssl.qhimg.com/t01d7c364142dff02d8.png`"}],attrs:{alt:""}})]),t._v(" "),r("p",[t._v("其次，注意请求的 "),r("code",[t._v("Content-Type")]),t._v(" 首部，默认是 "),r("code",[t._v("application/x-www-form-urlencoded; charset=UTF-8")]),t._v("，也就是我们通常见的 “a=A&b=B” 这种格式。但使用 FormData 时，就不行了。")]),t._v(" "),r("p",[t._v("对参数添加 "),r("code",[t._v("contentType 字段")]),t._v("，将其值设置为 "),r("code",[t._v("false")]),t._v(" 即可。如果 jQuery 版本小于 1.6，则手动设置为 "),r("code",[t._v("multipart/form-data")]),t._v("。具体说明请见文档说明：")]),t._v(" "),r("p",[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t0119601cbcb3c8db14.png",expression:"`https://p.ssl.qhimg.com/t0119601cbcb3c8db14.png`"}],attrs:{alt:""}})]),t._v(" "),r("p",[t._v("我以前通常都是使用原生的 "),r("code",[t._v("XMLHttpRequest")]),t._v("，所以倒也没有遇到过这种问题。既然遇到了，就得解决。因此记录下来，以备日后查找。")])])},[],!1,null,null,null);e.default=component.exports}}]);