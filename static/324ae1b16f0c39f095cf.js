(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{228:function(t,e,v){"use strict";v.r(e);var _={computed:{data:function(){return{title:"近来在Firefox上遇到的一些坑",description:"近来在Firefox上遇到的一些坑",keywords:"原创,开发心得",pathname:"problems-with-firefox",translation:null,create_time:"2016-03-12",prev:{title:"react-native 开发 App 手记",pathname:"app-with-react-native"},next:{title:"Chrome和Firefox下的网页截图",pathname:"screen-shot-upload"}}}}},o=v(3),component=Object(o.a)(_,function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("post",{attrs:{data:t.data}},[v("p",[t._v("因为工作一年多以来，做的工作基本都是和 "),v("code",[t._v("webkit")]),t._v(" 系列打交道。")]),t._v(" "),v("p",[t._v("先是做m站，后来做了两个 "),v("code",[t._v("app")]),t._v(" 内嵌的 "),v("code",[t._v("hybrid")]),t._v(" 项目，从来只考虑 "),v("code",[t._v("webkit")]),t._v(" 前缀和相关的伪类。")]),t._v(" "),v("p",[t._v("最近四个多月开始做内部的管理系统，写写样式，偶尔做个 "),v("code",[t._v("calendar")]),t._v("、"),v("code",[t._v("tree")]),t._v(" 之类的组件，所有的基本只考虑新版 "),v("code",[t._v("Chrome")]),t._v("。从来没考虑别的问题。")]),t._v(" "),v("p",[t._v("最近在帮人解决 "),v("code",[t._v("firefox")]),t._v(" 下的一些兼容问题。"),v("code",[t._v("QA")]),t._v(" 妹纸提交了一堆 "),v("code",[t._v("“bug”")]),t._v("。"),v("code",[t._v("Bug")]),t._v("列表让人看了头疼，还有点心虚。囧。")]),t._v(" "),v("p",[t._v("按部就班，先打开控制台。一番研究，发现不少 "),v("code",[t._v("“bug”")]),t._v(" 都是样式的问题，并不是脚本兼容做得不好。")]),t._v(" "),v("p",[t._v("下面就细数下最近发现的一些 "),v("code",[t._v("bug")]),t._v("，算是做个备忘。以后还是得注意啊。")]),t._v(" "),v("h2",{attrs:{id:"-background-position-x-"}},[t._v("一）还在用 "),v("strong",[t._v("background-position-x")]),t._v(" 吗")]),t._v(" "),v("p",[t._v("以前看一些CSS规范，反复强调不要使用 "),v("code",[t._v("background-position-x")]),t._v(" 之类的属性。")]),t._v(" "),v("p",[t._v("如"),v("a",{attrs:{href:"https://github.com/fex-team/styleguide/blob/master/css.md#46-2d-位置",target:"_blank"}},[t._v("百度"),v("code",[t._v("FEX")])]),t._v("就指出：")]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v(" 4.6 2D 位置")]),t._v("\n[强制] 必须同时给出水平和垂直方向的位置。")])]),t._v(" "),v("pre",[v("code",{staticClass:"hljs lang-css"},[v("span",{staticClass:"hljs-comment"},[t._v("/* good */")]),t._v("\n"),v("span",{staticClass:"hljs-selector-tag"},[t._v("body")]),t._v(" {\n    "),v("span",{staticClass:"hljs-attribute"},[t._v("background-position")]),t._v(": center top; "),v("span",{staticClass:"hljs-comment"},[t._v("/* 50% 0% */")]),t._v("\n}\n\n"),v("span",{staticClass:"hljs-comment"},[t._v("/* bad */")]),t._v("\n"),v("span",{staticClass:"hljs-selector-tag"},[t._v("body")]),t._v(" {\n    "),v("span",{staticClass:"hljs-attribute"},[t._v("background-position")]),t._v(": top; "),v("span",{staticClass:"hljs-comment"},[t._v("/* 50% 0% */")]),t._v("\n}")])]),v("p",[t._v("一直以来恪守这个规则，但并没有深究原因。")]),t._v(" "),v("p",[t._v("直到这次，真正遇到了问题。才在控制台上发现，原来 "),v("code",[t._v("background-position-x")]),t._v(" 在 "),v("code",[t._v("Firefox")]),t._v(" 下面是"),v("strong",[t._v("无效")]),t._v("的！！！")]),t._v(" "),v("h2",{attrs:{id:"-"}},[t._v("二）咦，为嘛还没开始输入文本框就验证变红了？")]),t._v(" "),v("p",[t._v("第二个问题。")]),t._v(" "),v("p",[t._v("项目有个修改密码的表单。验证不通过的话，输入框会加上红色的边框。")]),t._v(" "),v("p",[t._v("然后 "),v("code",[t._v("QA")]),t._v(" 妹纸在描述中说的是：")]),t._v(" "),v("blockquote",[v("p",[v("code",[t._v("firefox")]),t._v(" 浏览器中，修改密码页面，输入框中不输入任何字符，输入框颜色也是红的  ")])]),t._v(" "),v("p",[t._v("我还以为又是哪里的js写得不对呢。找了半天，还是决定从样式入手。")]),t._v(" "),v("p",[v("code",[t._v("Firefox")]),t._v(" 的调试工具面板里，似乎只列出了样式表中的样式。浏览器默认样式的值，很难找到。我只能一点点试验。")]),t._v(" "),v("p",[t._v("最后发现，"),v("code",[t._v("input")]),t._v(" 输入框好像都带了个 "),v("code",[t._v("required")]),t._v(" 属性。这是 "),v("code",[t._v("HTML5")]),t._v(" 里表示表单元素必填的属性。莫非问题出在这里？试着删除了这个属性，果然解决了。")]),t._v(" "),v("p",[t._v("其实，这红色的边框，并不是 "),v("code",[t._v("border")]),t._v("，而是 "),v("code",[t._v("box-shadow")]),t._v(" 啊。")]),t._v(" "),v("p",[t._v("最后得到解决方案是加上这段 "),v("code",[t._v("CSS")]),t._v("：")]),t._v(" "),v("pre",[v("code",{staticClass:"hljs lang-css"},[v("span",{staticClass:"hljs-selector-tag"},[t._v("input")]),v("span",{staticClass:"hljs-selector-pseudo"},[t._v(":required")]),v("span",{staticClass:"hljs-selector-pseudo"},[t._v(":invalid")]),t._v(" {\n    "),v("span",{staticClass:"hljs-attribute"},[t._v("box-shadow")]),t._v(": none;\n}")])]),v("h2",{attrs:{id:"-outline-0-"}},[t._v("三）我擦，明明写了 "),v("code",[t._v("outline: 0")]),t._v("可是然并卵啊")]),t._v(" "),v("p",[v("code",[t._v("QA")]),t._v("妹纸还反映，登录、注册等视图的各种按钮，在 "),v("code",[t._v("Firefox")]),t._v(" 怎么点击之后，会出现黑色的边框啊？")]),t._v(" "),v("p",[t._v("啥？难道写代码的前端哥们儿不知道在 "),v("code",[t._v(":active")]),t._v("、"),v("code",[t._v(":focus")]),t._v(" 等状态下写个 "),v("code",[t._v("outline:0")]),t._v(" 啊？这不科学。")]),t._v(" "),v("p",[t._v("于是又开始了神奇的探(gu)索(ge)之旅。")]),t._v(" "),v("p",[t._v("这次得到的答案是，这黑色的细线还真不是 "),v("code",[t._v("outline")]),t._v("。这是一个奇怪的伪类，"),v("code",[t._v("::-moz-focus-inner")]),t._v("。简直哭死在键盘上。")]),t._v(" "),v("p",[t._v("于是，下面这段代码解决问题：")]),t._v(" "),v("pre",[v("code",{staticClass:"hljs lang-css"},[v("span",{staticClass:"hljs-selector-tag"},[t._v("button")]),v("span",{staticClass:"hljs-selector-pseudo"},[t._v("::-moz-focus-inner")]),t._v(",\n"),v("span",{staticClass:"hljs-selector-tag"},[t._v("input")]),v("span",{staticClass:"hljs-selector-attr"},[t._v('[type="reset"]')]),v("span",{staticClass:"hljs-selector-pseudo"},[t._v("::-moz-focus-inner")]),t._v(",\n"),v("span",{staticClass:"hljs-selector-tag"},[t._v("input")]),v("span",{staticClass:"hljs-selector-attr"},[t._v('[type="button"]')]),v("span",{staticClass:"hljs-selector-pseudo"},[t._v("::-moz-focus-inner")]),t._v(",\n"),v("span",{staticClass:"hljs-selector-tag"},[t._v("input")]),v("span",{staticClass:"hljs-selector-attr"},[t._v('[type="submit"]')]),v("span",{staticClass:"hljs-selector-pseudo"},[t._v("::-moz-focus-inner")]),t._v(",\n"),v("span",{staticClass:"hljs-selector-tag"},[t._v("input")]),v("span",{staticClass:"hljs-selector-attr"},[t._v('[type="file"]')]),t._v(" > "),v("span",{staticClass:"hljs-selector-tag"},[t._v("input")]),v("span",{staticClass:"hljs-selector-attr"},[t._v('[type="button"]')]),v("span",{staticClass:"hljs-selector-pseudo"},[t._v("::-moz-focus-inner")]),t._v(" {\n    "),v("span",{staticClass:"hljs-attribute"},[t._v("border-color")]),t._v(": transparent;\n}")])]),v("h2",{attrs:{id:"-"}},[t._v("最后，还有些其他的")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("还有什么 "),v("code",[t._v("clipboardData")]),t._v(" 截图粘贴的问题，见上一篇: "),v("a",{attrs:{href:"https://segmentfault.com/a/1190000004584071",target:"_blank"}},[t._v("【在网页中获取截图数据】Chrome和Firefox下的实战经验")]),t._v("；")])]),t._v(" "),v("li",[v("p",[t._v("还有些东西，当时写到注释中了，忘了。。")])])]),t._v(" "),v("p",[t._v("TO BE CONTINUED...")])])},[],!1,null,null,null);e.default=component.exports}}]);