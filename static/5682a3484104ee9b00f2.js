(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{250:function(t,e,r){"use strict";r.r(e);var o={computed:{data:function(){return{title:"[译] WebP 支持：超乎你想象",description:"WebP 支持：超乎你想象",keywords:"翻译,Webp,前端优化",pathname:"webp-support",translation:{author:"optimus.keycdn.com",social:"https://optimus.keycdn.com/",from:"https://optimus.keycdn.com/support/webp-support/"},create_time:"2016-07-18",prev:{title:"[译] 移动开发中的仿真器与模拟器",pathname:"how-do-mobile-emulators-even"},next:{title:"[译] HTTP2 Server Push 实践：单 Link  报头包含多资源场景",pathname:"http-2-server-push-with-multiple-assets-per-link-header"}}}}},n=r(3),component=Object(n.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("post",{attrs:{data:t.data}},[r("p",[t._v("WebP 是 Google 发明的更小的替代 JPEG 和 PNG 的格式。最近有很多关于"),r("strong",[t._v("WebP支持")]),t._v("的疑惑，细说来就是可以用它做什么，不能做什么，比如说浏览器支持，CMS 支持等等。今天我想清除你所有可能的疑虑。WebP 的支持程度实际上比你想的可能要好得多。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/webp-support.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t014487db6f8b3a6294.png",expression:"`https://p.ssl.qhimg.com/t014487db6f8b3a6294.png`"}],attrs:{alt:"webp support"}})])]),t._v(" "),r("h2",{attrs:{id:"webp-"}},[t._v("WebP 浏览器支持")]),t._v(" "),r("p",[t._v("并非所有浏览器都支持 WebP，所以很重要的是你得清楚哪些浏览器是支持的，这可能会影响你做决定，是否在你的网站或项目中转换并"),r("a",{attrs:{href:"https://optimus.keycdn.com/support/configuration-to-deliver-webp/",target:"_blank"}},[t._v("采用 WebP 图片")]),t._v("。下面是所有主流浏览器及其 "),r("a",{attrs:{href:"http://caniuse.com/#feat=webp",target:"_blank"}},[t._v("WebP支持程度")]),t._v("。")]),t._v(" "),r("blockquote",[r("p",[t._v("截至 2016 年 7 月，全球浏览器对 WebP 支持率是 "),r("strong",[t._v("69.6%")]),t._v(" – caniuse.com")])]),t._v(" "),r("h3",{attrs:{id:"chrome-webp"}},[t._v("Chrome WebP")]),t._v(" "),r("p",[t._v("Google Chrome 官方"),r("strong",[t._v("自 Chrome 23 起开始支持 WebP")]),t._v("）（最初发布于 2012 年 11 月），自 Chrome 9 起部分支持。部分支持指的是并不支持无损的、支持 alpha 通道的 WebP。")]),t._v(" "),r("p",[t._v("Google 的安卓浏览器（Google’s Android browser）从 4.2 版本起开始官方支持 WebP（最初发布于 2012 年 11 月），4 版本起开始部分支持。Google Chrome 安卓版（ Google’s Chrome for Android browser）从 Chrome 50 起开始支持 Webp。")]),t._v(" "),r("h3",{attrs:{id:"opera-webp"}},[t._v("Opera WebP")]),t._v(" "),r("p",[t._v("Opera 官方"),r("strong",[t._v("自 Opera 12.1 开始支持 WebP")]),t._v("（最初发布于 2012 年 11 月），自 Opera 11.5 起部分支持。部分支持指的是并不支持无损的、支持 alpha 通道的 WebP。")]),t._v(" "),r("p",[t._v("Opera mini 浏览器当前所有版本都官方支持 WebP。")]),t._v(" "),r("h3",{attrs:{id:"firefox-webp"}},[t._v("FireFox WebP")]),t._v(" "),r("p",[t._v("Firefox "),r("strong",[t._v("当前不支持 WebP")]),t._v("。Mozilla 论坛的 "),r("a",{attrs:{href:"https://bugzilla.mozilla.org/show_bug.cgi?id=856375",target:"_blank"}},[t._v("bug 856375")]),t._v(" 正在讨论此事。")]),t._v(" "),r("h3",{attrs:{id:"internet-explorer-webp"}},[t._v("Internet Explorer WebP")]),t._v(" "),r("p",[t._v("Internet Explorer 和他们新的 Edge 浏览器，都"),r("strong",[t._v("不支持WebP")]),t._v("。而且目前并无添加支持的"),r("a",{attrs:{href:"https://developer.microsoft.com/en-us/microsoft-edge/platform/status/webpimageformatsupport?filter=f3f0000bf&search=webp",target:"_blank"}},[t._v("任何打算")]),t._v("。不过，已有"),r("a",{attrs:{href:"https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/6508417-webp-image-format-support",target:"_blank"}},[t._v("用户发声讨论")]),t._v("，人们要求微软将 Webp 支持加入 Edge。")]),t._v(" "),r("h3",{attrs:{id:"safari-webp"}},[t._v("Safari WebP")]),t._v(" "),r("p",[t._v("Apple 的 Safari 浏览器及其 iOS Safari 浏览器都"),r("strong",[t._v("不支持WebP")]),t._v("。不过，最近 HTML5test 有条推文说我们有望在 iOS 10 看到"),r("a",{attrs:{href:"https://twitter.com/html5test/status/752434454061322240",target:"_blank"}},[t._v("Safari支持 WebP")]),t._v("。iOS 10 目前处于 beta 测试阶段，所以时间会说明一切。")]),t._v(" "),r("h2",{attrs:{id:"-webp-"}},[t._v("你该使用 WebP 吗?")]),t._v(" "),r("p",[t._v("因为全球 WebP 支持度在 70% 左右浮动，使用这种图片格式来替代 PNG 和 JPEG 是极有意义的。还有重要的一点要提到，无论如何实现 WebP，"),r("strong",[t._v("你只是为支持的浏览器提供 WebP 服务")]),t._v("，而为其他浏览器提供 PNG 和 JPEG。使用 WebP 并不会破坏你的图片。把这当做增值，而非改变。还有另外一些东西需要考虑，如浏览器市场份额，当前流量，WebP 相对于 PNG 和 JPEG 的文件体积。")]),t._v(" "),r("h3",{attrs:{id:"1-"}},[t._v("1. 浏览器市场份额")]),t._v(" "),r("p",[t._v("决定是否使用 WebP 的时候，记得看下浏览器市场份额，因为 Chrome 和 Opera 支持 WebP，所以有必要看下他们的占比。我们从一些不同来源收集了一些统计数据，它们都有自己不同的数据收集方式：")]),t._v(" "),r("p",[r("strong",[t._v("StatCounter 浏览器市场份额")])]),t._v(" "),r("p",[r("a",{attrs:{href:"http://gs.statcounter.com/#browser-ww-monthly-201506-201606",target:"_blank"}},[t._v("StatCounter")]),t._v(" 截至 2016 年 6 月的数据显示，Chrome 占有市场份额为 58% 的，Firefox 以大约 16% 排名第二。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-market-share-statcounter.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t01e98fb172678790eb.png",expression:"`https://p.ssl.qhimg.com/t01e98fb172678790eb.png`"}],attrs:{alt:"浏览器市场份额 statcounter"}})])]),t._v(" "),r("p",[r("strong",[t._v("W3Counter 浏览器市场份额")])]),t._v(" "),r("p",[r("a",{attrs:{href:"https://www.w3counter.com/globalstats.php",target:"_blank"}},[t._v("W3Counter")]),t._v(" 截至 2016 年 6 月的数据显示，Chrome 占有约 57% 的市场比例，Safari 以约 14% 跻身第二。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-market-share-w3counter.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t0192f7b51936dfdb31.png",expression:"`https://p.ssl.qhimg.com/t0192f7b51936dfdb31.png`"}],attrs:{alt:"浏览器市场份额 w3counter"}})])]),t._v(" "),r("p",[r("strong",[t._v("W3Schools 浏览器市场份额")])]),t._v(" "),r("p",[r("a",{attrs:{href:"http://www.w3schools.com/browsers/browsers_stats.asp",target:"_blank"}},[t._v("W3Schools")]),t._v(" 截至 2016 年 5 月的数据显示，Chrome 占有约 71% 的市场份额，Firefox 以约 17% 居于其后。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-market-share-w3schools.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t01db821c6f04c36003.png",expression:"`https://p.ssl.qhimg.com/t01db821c6f04c36003.png`"}],attrs:{alt:"浏览器市场份额 w3schools"}})])]),t._v(" "),r("p",[r("strong",[t._v("Clicky 浏览器市场份额")])]),t._v(" "),r("p",[r("a",{attrs:{href:"https://clicky.com/marketshare/global/web-browsers/",target:"_blank"}},[t._v("Clicky")]),t._v(" 截至 2016 年 7 月的数据显示，Chrome 占有约 50% 的市场份额，Firefox 以约 18% 位居第二。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/clicky-browser-market-share.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t017e1f50b2d8d11195.png",expression:"`https://p.ssl.qhimg.com/t017e1f50b2d8d11195.png`"}],attrs:{alt:"clicky browser market share"}})])]),t._v(" "),r("p",[t._v("从上面的数据可以看到，"),r("strong",[t._v("Chrome 平均占有约 59% 的市场份额")]),t._v("，所以必须意识到，如果在项目中加入 Webp 图片，大多数访客都会看到 WebP 版本。Opera 仅拥有市场份额的一小部分，但它们的用户也可以看到。")]),t._v(" "),r("h3",{attrs:{id:"2-google-analytics"}},[t._v("2. Google Analytics")]),t._v(" "),r("p",[t._v("尽管浏览器市场份额对大多数人来说可能倾向于 Chrome，并不意味着你的网站/项目也是如此。确认数据总是很重要的。做起来很容易，点击 Google Analytics 的 “浏览器与操作系统”（“Browser & OS”）部分就能看到。在下面的例子中，可以看到将近 70% 的流量来自 Chrome。在这种情况下，WebP 是很有利的，这意味着 70% 的访客会看到更小体积的文件。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/browser-google-analytics.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t010cc69b1b3cce1efc.png",expression:"`https://p.ssl.qhimg.com/t010cc69b1b3cce1efc.png`"}],attrs:{alt:"browser google analytics"}})])]),t._v(" "),r("p",[t._v("还有，别忘了移动端！可以在 Google Analytics 的“设备”（“Devices”）部分看到。如你所见，大部分流量来自苹果设备。所以如果 iOS 10 完全支持 WebP 的话会颇有意思，这样一来会大量的移动端流量将会有戏剧性的不同。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/google-analytics-mobile.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t01270fb13519a7838f.png",expression:"`https://p.ssl.qhimg.com/t01270fb13519a7838f.png`"}],attrs:{alt:"google analytics mobile"}})])]),t._v(" "),r("h3",{attrs:{id:"3-webp-"}},[t._v("3. WebP 文件体积")]),t._v(" "),r("p",[t._v("已经有大量研究比较了 WebP 与 PNG、JPEG 的文件体积。一定要去看看它们。")]),t._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://optimus.keycdn.com/support/jpg-to-webp/",target:"_blank"}},[t._v("JPG 转 WebP – 压缩大小比较")])]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("WebP 平均减小了 85.87% 的文件提交")]),t._v("。加载时间降低了 11%，页面整体大小减少了 29%。")])])]),t._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://optimus.keycdn.com/support/png-to-webp/",target:"_blank"}},[t._v("PNG 转 WebP – 压缩大小比较")])]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("WebP 平均减小了42.8% 的文件提交")]),t._v("。加载时间降低了 3%，页面整体大小减少了 25%。")])])]),t._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://www.keycdn.com/blog/wordpress-cache-enabler/",target:"_blank"}},[t._v("WordPress 缓存开启下的 WebP\n案例研究")])])])]),t._v(" "),r("p",[t._v("还需要考虑"),r("em",[t._v("成本效益比")]),t._v("（cost-benefit ratio）。对 WordPress 这样的 CMS 来说，现在有两种图片，一个是 JPEG 或 PNG，还有一个 WebP。因此使用 WebP 会占用服务器更多的硬盘空间。但事实是，更小体积的图片带来的是更快的加载时间。不应忽略节省下来的流量：取决于不同项目，积累下来的数量相当可观。")]),t._v(" "),r("p",[t._v("其他人正在使用 WebP，虽然你可能没注意到。Dollar Shave Club 可以将其 App 的大小由 230 MB 减少到 30 MB！结果就是，"),r("a",{attrs:{href:"http://engineering.dollarshaveclub.com/shaving-our-image-size/",target:"_blank"}},[t._v("使用 WebP 格式将体积减少了七倍")]),t._v("。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/webp-image-savings.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t01a44a5cc84b1188f7.png",expression:"`https://p.ssl.qhimg.com/t01a44a5cc84b1188f7.png`"}],attrs:{alt:"webp image savings"}})])]),t._v(" "),r("h2",{attrs:{id:"cms-webp-"}},[t._v("CMS WebP 支持")]),t._v(" "),r("p",[t._v("接着平台支持的问题就来了，不管你是使用 WordPress 或 Joomla 这样 的 CMS，或者仅仅是像 Laravel 这样的 PHP 框架搭建的简单的静态站点。下面我们将会介绍一点关于如何在在不同平台上支持 Webp 图片的内容。")]),t._v(" "),r("h3",{attrs:{id:"wordpress-webp"}},[t._v("WordPress WebP")]),t._v(" "),r("p",[t._v("事实上，WordPress 很容易实现 WebP 支持。你可以使用我们的"),r("a",{attrs:{href:"https://wordpress.org/plugins/optimus/",target:"_blank"}},[t._v("集成图片优化(Image Optimizer)")]),t._v(" 插件，在将图片上传至 WordPress 媒体库时候自动转换为 WebP 格式。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/optimus-webp-files.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t0156107f9070a92137.png",expression:"`https://p.ssl.qhimg.com/t0156107f9070a92137.png`"}],attrs:{alt:"optimus webp files"}})])]),t._v(" "),r("p",[t._v("然后你可以使用免费的 "),r("a",{attrs:{href:"https://wordpress.org/plugins/cache-enabler/",target:"_blank"}},[t._v("WordPress Cache Enabler")]),t._v(" 插件来为访客提供 WebP 图片。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://optimuscdn.keycdn.com/support/wp-content/uploads/2016/07/webp-support-caching.png",target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t01af7fe49591cfda47.png",expression:"`https://p.ssl.qhimg.com/t01af7fe49591cfda47.png`"}],attrs:{alt:"webp support caching"}})])]),t._v(" "),r("p",[t._v("重点是，Cache Enabler 做的其实是判断浏览器支持，为支持的浏览器提供 WebP，而为其他浏览器提供 JPEG 或 PNG。它实际上已经自动为你做好了切换工作。")]),t._v(" "),r("h3",{attrs:{id:"joomla-webp"}},[t._v("Joomla WebP")]),t._v(" "),r("p",[t._v("Yireo 的免费的 "),r("a",{attrs:{href:"https://www.yireo.com/software/joomla-extensions/webp",target:"_blank"}},[t._v("WebP Joomla 扩展")]),t._v("，允许在浏览器支持的情况下启用 WebP 支持。其侦测浏览器对 WebP 的支持，基于 user-agent 简单检测（这样就能正确匹配 Chrome）以及额外的 JavaScript 检测。如若检测到支持 WebP，扩展会解析输出的 HTML，确保那些支持图片（png，jpg，jpeg）的链接被 Webp 图片替换掉。")]),t._v(" "),r("h3",{attrs:{id:"magento-webp"}},[t._v("Magento WebP")]),t._v(" "),r("p",[t._v("Yireo 的免费的 "),r("a",{attrs:{href:"https://www.yireo.com/software/magento-extensions/webp",target:"_blank"}},[t._v("WebP Magento 扩展")]),t._v("，允许在浏览器支持的情况下启用 WebP 支持。其侦测浏览器对 WebP 的支持，基于 user-agent 简单检测（Chrome）以及额外的 JavaScript 检测（这样也能够匹配其他浏览器）。如若检测到支持 WebP，扩展会解析 HTML 输出，确保那些支持图片（png，jpg，jpeg）的链接被 Webp 图片替换掉。")]),t._v(" "),r("h3",{attrs:{id:"-webp"}},[t._v("其他平台上的 WebP")]),t._v(" "),r("p",[t._v("对于其他平台，你应该去看看我们的这篇"),r("a",{attrs:{href:"https://optimus.keycdn.com/support/configuration-to-deliver-webp/",target:"_blank"}},[t._v("如何提供 WebP (how to deliver WebP)")]),t._v("。某些平台启用 WebP 支持，可能需要修改你的 "),r("code",[t._v(".htaccess")]),t._v(" 文件或者 Nginx 配置。")]),t._v(" "),r("h2",{attrs:{id:"-"}},[t._v("小结")]),t._v(" "),r("p",[t._v("如你所见，WebP 的支持程度可能比你最初想的要好得多。当然应该讲浏览器市场份额以及当前的浏览数据纳入考虑中。比方说，如果 70% 以上的流量都来自 Chrome，那使用 WebP 来加速网站意义重大。如果你在使用 CMS，一切都很简单，因为有很多插件来帮你完成 WebP 的转换。")]),t._v(" "),r("h2",{attrs:{id:"-"}},[t._v("相关文章")]),t._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://optimus.keycdn.com/support/wordpress-retina/",target:"_blank"}},[t._v("How to Use WordPress Retina and WebP Images")])])]),t._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://www.keycdn.com/blog/convert-to-webp-the-successor-of-jpeg/",target:"_blank"}},[t._v("Convert to WebP Format – The Successor of JPEG")])])])])])},[],!1,null,null,null);e.default=component.exports}}]);