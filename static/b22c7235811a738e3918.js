(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{164:function(t,n,l){"use strict";l.r(n);var v={computed:{data:function(){return{title:"关于移动端 rem 布局的一些总结",description:"关于移动端 rem 布局的一些总结",keywords:"原创,rem",pathname:"about-rem-layout",translation:null,create_time:"2015-08-31",prev:{title:"异步场景下的 js 编程",pathname:"js-promise-slides"},next:{title:"记一种水平垂直居中的办法",pathname:"vh-center-layout"}}}}},e=l(3),component=Object(e.a)(v,function(){var t=this,n=t.$createElement,l=t._self._c||n;return l("post",{attrs:{data:t.data}},[l("h2",{attrs:{id:"-"}},[t._v("【资源一】基础知识恕不回顾")]),t._v(" "),l("p",[t._v("基础知识参考以下两篇博客：")]),t._v(" "),l("p",[l("a",{attrs:{href:"http://isux.tencent.com/web-app-rem.html",target:"_blank"}},[t._v("http://isux.tencent.com/web-app-rem.html")])]),t._v(" "),l("p",[l("a",{attrs:{href:"http://www.w3cplus.com/css3/define-font-size-with-css3-rem",target:"_blank"}},[t._v("http://www.w3cplus.com/css3/define-font-size-with-css3-rem")])]),t._v(" "),l("h2",{attrs:{id:"-m-"}},[t._v("【资源二】淘宝m站首页的动态实现")]),t._v(" "),l("p",[t._v("学习"),l("a",{attrs:{href:"http://m.taobao.com",target:"_blank"}},[t._v("http://m.taobao.com")]),t._v(" 首页的实现。")]),t._v(" "),l("p",[l("strong",[t._v("最近读到"),l("a",{attrs:{href:"http://www.w3cplus.com",target:"_blank"}},[t._v("@大漠")]),t._v("的新文章《"),l("a",{attrs:{href:"http://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html",target:"_blank"}},[t._v("使用Flexible实现手淘H5页面的终端适配")]),t._v("》，和本部分有点关系。暂且加上来以供参考。（updated 2015-11-24）")])]),t._v(" "),l("p",[t._v("源码进行美化、解读之后，基本布局部分的代码已经被我还原出来了：（2016-01-13补充：后来才发现，早就开源在"),l("a",{attrs:{href:"https://github.com/amfe/lib-flexible",target:"_blank"}},[t._v("github")]),t._v("上了）")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-js"},[t._v("!"),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("win, lib")]),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" timer,\n        doc     = win.document,\n        docElem = doc.documentElement,\n\n        vpMeta   = doc.querySelector("),l("span",{staticClass:"hljs-string"},[t._v("'meta[name=\"viewport\"]'")]),t._v("),\n        flexMeta = doc.querySelector("),l("span",{staticClass:"hljs-string"},[t._v("'meta[name=\"flexible\"]'")]),t._v("),\n\n        dpr   = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(",\n        scale = "),l("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(",\n\n        flexible = lib.flexible || (lib.flexible = {});\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 设置了 viewport meta")]),t._v("\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (vpMeta) {\n\n        "),l("span",{staticClass:"hljs-built_in"},[t._v("console")]),t._v(".warn("),l("span",{staticClass:"hljs-string"},[t._v('"将根据已有的meta标签来设置缩放比例"')]),t._v(");\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" initial = vpMeta.getAttribute("),l("span",{staticClass:"hljs-string"},[t._v('"content"')]),t._v(").match("),l("span",{staticClass:"hljs-regexp"},[t._v("/initial\\-scale=([\\d\\.]+)/")]),t._v(");\n\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (initial) {\n            scale = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseFloat")]),t._v("(initial["),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("]); "),l("span",{staticClass:"hljs-comment"},[t._v("// 已设置的 initialScale")]),t._v("\n            dpr = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseInt")]),t._v("("),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(" / scale);      "),l("span",{staticClass:"hljs-comment"},[t._v("// 设备像素比 devicePixelRatio")]),t._v("\n        }\n\n    }\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 设置了 flexible Meta")]),t._v("\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("else")]),t._v(" "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (flexMeta) {\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" flexMetaContent = flexMeta.getAttribute("),l("span",{staticClass:"hljs-string"},[t._v('"content"')]),t._v(");\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (flexMetaContent) {\n\n            "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" initial = flexMetaContent.match("),l("span",{staticClass:"hljs-regexp"},[t._v("/initial\\-dpr=([\\d\\.]+)/")]),t._v("),\n                maximum = flexMetaContent.match("),l("span",{staticClass:"hljs-regexp"},[t._v("/maximum\\-dpr=([\\d\\.]+)/")]),t._v(");\n\n            "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (initial) {\n                dpr = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseFloat")]),t._v("(initial["),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("]);\n                scale = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseFloat")]),t._v("(("),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(" / dpr).toFixed("),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v("));\n            }\n\n            "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (maximum) {\n                dpr = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseFloat")]),t._v("(maximum["),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("]);\n                scale = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseFloat")]),t._v("(("),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(" / dpr).toFixed("),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v("));\n            }\n        }\n    }\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// viewport 或 flexible")]),t._v("\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// meta 均未设置")]),t._v("\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (!dpr && !scale) {\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// QST")]),t._v("\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// 这里的 第一句有什么用 ?")]),t._v("\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// 和 Android 有毛关系 ?")]),t._v("\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" u = (win.navigator.appVersion.match("),l("span",{staticClass:"hljs-regexp"},[t._v("/android/gi")]),t._v("), win.navigator.appVersion.match("),l("span",{staticClass:"hljs-regexp"},[t._v("/iphone/gi")]),t._v(")),\n            _dpr = win.devicePixelRatio;\n\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// 所以这里似乎是将所有 Android 设备都设置为 1 了")]),t._v("\n        dpr = u ? ( (_dpr >= "),l("span",{staticClass:"hljs-number"},[t._v("3")]),t._v(" && (!dpr || dpr >= "),l("span",{staticClass:"hljs-number"},[t._v("3")]),t._v("))\n                        ? "),l("span",{staticClass:"hljs-number"},[t._v("3")]),t._v("\n                        : (_dpr >= "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v(" && (!dpr || dpr >= "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v("))\n                            ? "),l("span",{staticClass:"hljs-number"},[t._v("2")]),t._v("\n                            : "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v("\n                  )\n                : "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(";\n\n        scale = "),l("span",{staticClass:"hljs-number"},[t._v("1")]),t._v(" / dpr;\n    }\n\n    docElem.setAttribute("),l("span",{staticClass:"hljs-string"},[t._v('"data-dpr"')]),t._v(", dpr);\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 插入 viewport meta")]),t._v("\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (!vpMeta) {\n        vpMeta = doc.createElement("),l("span",{staticClass:"hljs-string"},[t._v('"meta"')]),t._v(");\n\n        vpMeta.setAttribute("),l("span",{staticClass:"hljs-string"},[t._v('"name"')]),t._v(", "),l("span",{staticClass:"hljs-string"},[t._v('"viewport"')]),t._v(");\n        vpMeta.setAttribute("),l("span",{staticClass:"hljs-string"},[t._v('"content"')]),t._v(",\n            "),l("span",{staticClass:"hljs-string"},[t._v('"initial-scale="')]),t._v(" + scale + "),l("span",{staticClass:"hljs-string"},[t._v('", maximum-scale="')]),t._v(" + scale + "),l("span",{staticClass:"hljs-string"},[t._v('", minimum-scale="')]),t._v(" + scale + "),l("span",{staticClass:"hljs-string"},[t._v('", user-scalable=no"')]),t._v(");\n\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (docElem.firstElementChild) {\n            docElem.firstElementChild.appendChild(vpMeta)\n        } "),l("span",{staticClass:"hljs-keyword"},[t._v("else")]),t._v(" {\n            "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" div = doc.createElement("),l("span",{staticClass:"hljs-string"},[t._v('"div"')]),t._v(");\n            div.appendChild(vpMeta);\n            doc.write(div.innerHTML);\n        }\n    }\n\n    "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" "),l("span",{staticClass:"hljs-title"},[t._v("setFontSize")]),t._v("("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" winWidth = docElem.getBoundingClientRect().width;\n\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (winWidth / dpr > "),l("span",{staticClass:"hljs-number"},[t._v("540")]),t._v(") {\n            (winWidth = "),l("span",{staticClass:"hljs-number"},[t._v("540")]),t._v(" * dpr);\n        }\n\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// 根节点 fontSize 根据宽度决定")]),t._v("\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" baseSize = winWidth / "),l("span",{staticClass:"hljs-number"},[t._v("10")]),t._v(";\n\n        docElem.style.fontSize = baseSize + "),l("span",{staticClass:"hljs-string"},[t._v('"px"')]),t._v(";\n        flexible.rem = win.rem = baseSize;\n    }\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 调整窗口时重置")]),t._v("\n    win.addEventListener("),l("span",{staticClass:"hljs-string"},[t._v('"resize"')]),t._v(", "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n        clearTimeout(timer);\n        timer = setTimeout(setFontSize, "),l("span",{staticClass:"hljs-number"},[t._v("300")]),t._v(");\n    }, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 这一段是我自己加的")]),t._v("\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// orientationchange 时也需要重算下吧")]),t._v("\n    win.addEventListener("),l("span",{staticClass:"hljs-string"},[t._v('"orientationchange"')]),t._v(", "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n        clearTimeout(timer);\n        timer = setTimeout(setFontSize, "),l("span",{staticClass:"hljs-number"},[t._v("300")]),t._v(");\n    }, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// pageshow")]),t._v("\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// keyword: 倒退 缓存相关")]),t._v("\n    win.addEventListener("),l("span",{staticClass:"hljs-string"},[t._v('"pageshow"')]),t._v(", "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("e")]),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (e.persisted) {\n            clearTimeout(timer);\n            timer = setTimeout(setFontSize, "),l("span",{staticClass:"hljs-number"},[t._v("300")]),t._v(");\n        }\n    }, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 设置基准字体")]),t._v("\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" ("),l("span",{staticClass:"hljs-string"},[t._v('"complete"')]),t._v(" === doc.readyState) {\n        doc.body.style.fontSize = "),l("span",{staticClass:"hljs-number"},[t._v("12")]),t._v(" * dpr + "),l("span",{staticClass:"hljs-string"},[t._v('"px"')]),t._v(";\n    } "),l("span",{staticClass:"hljs-keyword"},[t._v("else")]),t._v(" {\n        doc.addEventListener("),l("span",{staticClass:"hljs-string"},[t._v('"DOMContentLoaded"')]),t._v(", "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n            doc.body.style.fontSize = "),l("span",{staticClass:"hljs-number"},[t._v("12")]),t._v(" * dpr + "),l("span",{staticClass:"hljs-string"},[t._v('"px"')]),t._v(";\n        }, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n    }\n\n    setFontSize();\n\n    flexible.dpr = win.dpr = dpr;\n\n    flexible.refreshRem = setFontSize;\n\n    flexible.rem2px = "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("d")]),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" c = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseFloat")]),t._v("(d) * "),l("span",{staticClass:"hljs-keyword"},[t._v("this")]),t._v(".rem;\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" ("),l("span",{staticClass:"hljs-string"},[t._v('"string"')]),t._v(" == "),l("span",{staticClass:"hljs-keyword"},[t._v("typeof")]),t._v(" d && d.match("),l("span",{staticClass:"hljs-regexp"},[t._v("/rem$/")]),t._v(")) {\n            c += "),l("span",{staticClass:"hljs-string"},[t._v('"px"')]),t._v(";\n        }\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" c;\n    };\n\n    flexible.px2rem = "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("d")]),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" c = "),l("span",{staticClass:"hljs-built_in"},[t._v("parseFloat")]),t._v("(d) / "),l("span",{staticClass:"hljs-keyword"},[t._v("this")]),t._v(".rem;\n\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" ("),l("span",{staticClass:"hljs-string"},[t._v('"string"')]),t._v(" == "),l("span",{staticClass:"hljs-keyword"},[t._v("typeof")]),t._v(" d && d.match("),l("span",{staticClass:"hljs-regexp"},[t._v("/px$/")]),t._v(")) {\n            c += "),l("span",{staticClass:"hljs-string"},[t._v('"rem"')]),t._v(";\n        }\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("return")]),t._v(" c;\n    }\n}("),l("span",{staticClass:"hljs-built_in"},[t._v("window")]),t._v(", "),l("span",{staticClass:"hljs-built_in"},[t._v("window")]),t._v(".lib || ("),l("span",{staticClass:"hljs-built_in"},[t._v("window")]),t._v(".lib = {}));")])]),l("p",[l("strong",[t._v("注意：")]),t._v("\n淘宝首页在iPhone4上设置的initial-scale是0.5（其他尺寸类似）。")]),t._v(" "),l("p",[t._v("因此，这句在iPhone4上得出的结果是640：")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" winWidth = docElem.getBoundingClientRect().width;")])]),l("p",[t._v("正是因为淘宝这种独特的设置，使得 ios 上 1px边框的问题完美解决（1px变2px， 又被 "),l("code",[t._v("initial-scale=0.5")]),t._v(" 缩小了一半）。")]),t._v(" "),l("h2",{attrs:{id:"-js-"}},[t._v("【资源三】常规情况下js根据屏幕宽度动态计算")]),t._v(" "),l("p",[t._v("使用js动态计算：")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-js"},[t._v("\n!("),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("doc, win")]),t._v(") ")]),t._v("{\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" docEle = doc.documentElement,\n        evt = "),l("span",{staticClass:"hljs-string"},[t._v('"onorientationchange"')]),t._v(" "),l("span",{staticClass:"hljs-keyword"},[t._v("in")]),t._v(" "),l("span",{staticClass:"hljs-built_in"},[t._v("window")]),t._v(" ? "),l("span",{staticClass:"hljs-string"},[t._v('"orientationchange"')]),t._v(" : "),l("span",{staticClass:"hljs-string"},[t._v('"resize"')]),t._v(",\n        fn = "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n            "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" width = docEle.clientWidth;\n            width && (docEle.style.fontSize = "),l("span",{staticClass:"hljs-number"},[t._v("20")]),t._v(" * (width / "),l("span",{staticClass:"hljs-number"},[t._v("320")]),t._v(") + "),l("span",{staticClass:"hljs-string"},[t._v('"px"')]),t._v(");\n        };\n\n    win.addEventListener(evt, fn, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n    doc.addEventListener("),l("span",{staticClass:"hljs-string"},[t._v('"DOMContentLoaded"')]),t._v(", fn, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n\n}("),l("span",{staticClass:"hljs-built_in"},[t._v("document")]),t._v(", "),l("span",{staticClass:"hljs-built_in"},[t._v("window")]),t._v("));")])]),l("h2",{attrs:{id:"-"}},[t._v("【资源四】媒体查询较密集的断点")]),t._v(" "),l("p",[t._v("使用css3 media query 实现")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-css"},[t._v("@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("320px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {"),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("14px")]),t._v(";}\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("360px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {"),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("16px")]),t._v(";}\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("400px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {"),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("18px")]),t._v(";}\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("440px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {"),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("20px")]),t._v(";}\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("480px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {"),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("22px")]),t._v(";}\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("640px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {"),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("28px")]),t._v(";}\n}")])]),l("h2",{attrs:{id:"-vw"}},[t._v("【资源五】强大的单位——vw")]),t._v(" "),l("p",[t._v("使用单位 vw 实现动态计算。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-css"},[l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n    "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("31.25vw")]),t._v("; "),l("span",{staticClass:"hljs-comment"},[t._v("/* 表达式：100*100vw/320 */")]),t._v("\n}")])]),l("p",[t._v("不过考虑到国内兼容性的问题，还是结合媒体查询来使用比较好。（媒体查询的断点暂时是借用上面的例子）")]),t._v(" "),l("p",[l("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://segmentfault.com/img/bVpJlx",expression:"`https://segmentfault.com/img/bVpJlx`"}],attrs:{alt:"图片描述"}})]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-css"},[t._v("@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("320px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("100px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("360px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("112.5px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("400px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("125px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("440px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("137.5px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("480px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("150px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("640px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("200px")]),t._v(";\n    }\n}\n\n"),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n    "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("31.25vw")]),t._v(";\n}")])]),l("hr"),t._v(" "),l("h2",{attrs:{id:"-"}},[t._v("【总结】")]),t._v(" "),l("p",[t._v("对以上种种方法的综合：")]),t._v(" "),l("p",[t._v("1、meta:viewport,  还是initial-scale为 1；")]),t._v(" "),l("p",[t._v("2、320px屏幕下，把页面根元素html的字体大小设置为50px；")]),t._v(" "),l("p",[t._v("3、鉴于我们拿到的设计图目前是640px宽的基准，这样我们就不用每次自己除以2了，直接在PS中量就好；")]),t._v(" "),l("p",[t._v("4、宽度什么的最好还是用百分比处理；涉及到高度、字体大小之类的则用rem。")]),t._v(" "),l("p",[t._v("eg：\n设计稿上，div高度为40px；那么css就是 "),l("code",[t._v("div {height: 0.4rem;}")])]),t._v(" "),l("p",[t._v("结果就只剩下一步转换：设计稿上量的长度转化为小数。 "),l("code",[t._v("50% => 0.5")]),t._v("  这种计算，不要太简单。。。")]),t._v(" "),l("p",[t._v("【方法一】纯粹css，支持calc函数的动态计算；不支持的用css媒体查询断点，优雅降级。")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-css"},[t._v("@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("320px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("50px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("360px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("56px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("400px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("63px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("440px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("69px")]),t._v(";\n    }\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("480px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("75px")]),t._v(";\n    }\n}\n\n"),l("span",{staticClass:"hljs-comment"},[t._v("/**\n * 2016-01-13 订正\n * 做适当限制\n * 大于640的屏幕 固定为100px\n * 同时需要对body或者最外层wrapper做max-width: 640px的限制\n */")]),t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("/*\n@media screen and (min-width: 640px) {\n    html {\n        font-size: 100px;\n    }\n}\n\nhtml {\n    font-size: 15.625vw;\n}\n*/")]),t._v("\n\n"),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n    "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("15.625vw")]),t._v(";\n}\n\n@"),l("span",{staticClass:"hljs-keyword"},[t._v("media")]),t._v(" screen and (min-width: "),l("span",{staticClass:"hljs-number"},[t._v("640px")]),t._v(") {\n    "),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {\n        "),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("100px")]),t._v(";\n    }\n}")])]),l("p",[t._v("【方法二】脚本动态计算")]),t._v(" "),l("p",[l("strong",[t._v("大前提：")])]),t._v(" "),l("p",[t._v("1、initial-scale 为 1；")]),t._v(" "),l("p",[t._v("2、在项目css中(注意不要被公共的base、common之类的影响了，资源加载顺序也是蛮重要的)，先把html的fontSize设置为 50px（或者加上媒体查询代码）, 避免加载未完成时候样式错乱; ")]),t._v(" "),l("pre",[l("code",{staticClass:"hljs lang-css"},[t._v("\n"),l("span",{staticClass:"hljs-comment"},[t._v("/* css */")]),t._v("\n"),l("span",{staticClass:"hljs-selector-tag"},[t._v("html")]),t._v(" {"),l("span",{staticClass:"hljs-attribute"},[t._v("font-size")]),t._v(": "),l("span",{staticClass:"hljs-number"},[t._v("50px")]),t._v(";}")])]),l("pre",[l("code",{staticClass:"hljs lang-javascript"},[l("span",{staticClass:"hljs-comment"},[t._v("/* javascript */")]),t._v("\n\n!("),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("win, doc")]),t._v(")")]),t._v("{\n    "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" "),l("span",{staticClass:"hljs-title"},[t._v("setFontSize")]),t._v("("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// 获取window 宽度")]),t._v("\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// zepto实现 $(window).width()就是这么干的")]),t._v("\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" winWidth =  "),l("span",{staticClass:"hljs-built_in"},[t._v("window")]),t._v(".innerWidth;\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// doc.documentElement.style.fontSize = (winWidth / 640) * 100 + 'px' ;")]),t._v("\n\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// 2016-01-13 订正")]),t._v("\n        "),l("span",{staticClass:"hljs-comment"},[t._v("// 640宽度以上进行限制 需要css进行配合")]),t._v("\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" size = (winWidth / "),l("span",{staticClass:"hljs-number"},[t._v("640")]),t._v(") * "),l("span",{staticClass:"hljs-number"},[t._v("100")]),t._v(";\n        doc.documentElement.style.fontSize = (size < "),l("span",{staticClass:"hljs-number"},[t._v("100")]),t._v(" ? size : "),l("span",{staticClass:"hljs-number"},[t._v("100")]),t._v(") + "),l("span",{staticClass:"hljs-string"},[t._v("'px'")]),t._v(" ;\n    }\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" evt = "),l("span",{staticClass:"hljs-string"},[t._v("'onorientationchange'")]),t._v(" "),l("span",{staticClass:"hljs-keyword"},[t._v("in")]),t._v(" win ? "),l("span",{staticClass:"hljs-string"},[t._v("'orientationchange'")]),t._v(" : "),l("span",{staticClass:"hljs-string"},[t._v("'resize'")]),t._v(";\n\n    "),l("span",{staticClass:"hljs-keyword"},[t._v("var")]),t._v(" timer = "),l("span",{staticClass:"hljs-literal"},[t._v("null")]),t._v(";\n\n    win.addEventListener(evt, "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v(" ("),l("span",{staticClass:"hljs-params"}),t._v(") ")]),t._v("{\n        clearTimeout(timer);\n\n        timer = setTimeout(setFontSize, "),l("span",{staticClass:"hljs-number"},[t._v("300")]),t._v(");\n    }, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n\n    win.addEventListener("),l("span",{staticClass:"hljs-string"},[t._v('"pageshow"')]),t._v(", "),l("span",{staticClass:"hljs-function"},[l("span",{staticClass:"hljs-keyword"},[t._v("function")]),t._v("("),l("span",{staticClass:"hljs-params"},[t._v("e")]),t._v(") ")]),t._v("{\n        "),l("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (e.persisted) {\n            clearTimeout(timer);\n\n            timer = setTimeout(setFontSize, "),l("span",{staticClass:"hljs-number"},[t._v("300")]),t._v(");\n        }\n    }, "),l("span",{staticClass:"hljs-literal"},[t._v("false")]),t._v(");\n\n    "),l("span",{staticClass:"hljs-comment"},[t._v("// 初始化")]),t._v("\n    setFontSize();\n\n}("),l("span",{staticClass:"hljs-built_in"},[t._v("window")]),t._v(", "),l("span",{staticClass:"hljs-built_in"},[t._v("document")]),t._v("));")])]),l("p",[t._v("嗯。。。")]),t._v(" "),l("p",[t._v("就这么愉快地结束了。。。")]),t._v(" "),l("p",[t._v("不知道解读了某宝首页的一点点代码，然后发在这里，会不会有什么后果。。。")]),t._v(" "),l("p",[t._v("==================================================")]),t._v(" "),l("h2",{attrs:{id:"2016-1-13-"}},[t._v("2016年1月13日补充")]),t._v(" "),l("p",[t._v("写过这篇博客之后，又陆续读过几篇关于布局的文章。")]),t._v(" "),l("p",[t._v("具体已经忘了，大约是大漠的文章，还有一篇应该是搜车前端的博文，另外应该还有关于手淘首页的分析的文章。")]),t._v(" "),l("p",[t._v("另外，自己也用rem布局实践过几个项目。")]),t._v(" "),l("p",[t._v("不得不说，个人觉得rem布局现在已经可以放弃了。"),l("code",[t._v("flex")]),t._v("布局已经很好用了，早已有之的百分比布局等稍用点心思也并不难。")]),t._v(" "),l("p",[t._v("这篇博客一直想改。但懒惰总是占据着我的身体。")]),t._v(" "),l("p",[t._v("最后再说下，字体大小自适应是错误的，字体大小自适应是错误的，字体大小自适应是错误的。")]),t._v(" "),l("p",[t._v("rem 布局，可以告别了。")]),t._v(" "),l("p",[t._v("迎接 flex 布局吧。")]),t._v(" "),l("p",[t._v("=========================================")]),t._v(" "),l("h3",{attrs:{id:"-"}},[t._v("写在最后")]),t._v(" "),l("p",[t._v("这篇博客写于半年前，那时候还是个刚毕业的菜鸟。")]),t._v(" "),l("p",[t._v("偶尔有点想法，看了一些大牛的文章，有了这篇博客。")]),t._v(" "),l("p",[t._v("这也是半年来唯一一篇产出。")]),t._v(" "),l("p",[t._v("5k的浏览量，95收藏，13推荐，已经让我很惊讶了。")]),t._v(" "),l("p",[t._v("谢谢各路大神们的关注。")]),t._v(" "),l("p",[t._v("半年来感受到的前端大环境变化还是很大。虽然在公司没有太多变化，但眼睛总得看着世界吧。")]),t._v(" "),l("p",[t._v("接下来，还得继续学习。")]),t._v(" "),l("p",[t._v("由于手上没什么项目，一直想探索出一套自己的自动化流程，但到现在也只是积累了许多版的草稿。")]),t._v(" "),l("p",[l("code",[t._v("nodejs")]),t._v("方面也得有所探索，"),l("code",[t._v("nodejs")]),t._v(" 再加上 "),l("code",[t._v("shelljs")]),t._v(" 和 "),l("code",[t._v("yargs")]),t._v(" 用起来是真的很爽。（"),l("a",{attrs:{href:"www.ruanyifeng.com/blog/2015/05/command-line-with-node.html"}},[t._v("鸣谢阮大神的文章")]),t._v("）")]),t._v(" "),l("p",[t._v("算是年终总结了。在前端的路上继续走吧。")]),t._v(" "),l("p",[t._v("=========================================")]),t._v(" "),l("h3",{attrs:{id:"-"}},[t._v("一点想法：评论区的回复")]),t._v(" "),l("p",[t._v("媒体查询和js动态计算是两种方式。")]),t._v(" "),l("p",[t._v("首先，支持 CSS3 "),l("code",[t._v("calc")]),t._v("方法 和 "),l("code",[t._v("rem")]),t._v("、"),l("code",[t._v("vw")]),t._v("单位的浏览器下，只需要"),l("code",[t._v("html {font-size: 15.625vw;}")]),t._v("这样一句就好，另外加个媒体查询限制下。")]),t._v(" "),l("p",[t._v("之前的一大堆密集的断点只是为了hack不支持"),l("code",[t._v("calc")]),t._v("或者"),l("code",[t._v("calc")]),t._v("的情况。其次，js动态设置html的"),l("code",[t._v("font-size")]),t._v("，只要浏览器支持rem单位即可。")]),t._v(" "),l("p",[t._v("为什么会考虑到密集的mq断点呢，因为当时还在考虑文字大小的自适应问题。")]),t._v(" "),l("p",[t._v("实践证明，字体大小自适应是一种错误的想法。")]),t._v(" "),l("p",[t._v("移动开发在必要情况的下，可以适当使用mq来调整字体大小，但做成完全自适应则是一种存在问题的做法。")]),t._v(" "),l("p",[t._v("因此，这里提到的 "),l("code",[t._v("calc")]),t._v("和"),l("code",[t._v("vh")]),t._v(" "),l("code",[t._v("rem")]),t._v("配合的做法，最好只用来做布局的工作。js动态计算也是类似，更适合做布局。")])])},[],!1,null,null,null);n.default=component.exports}}]);